{"ast":null,"code":"import _asyncToGenerator from \"/Users/ivangarciaparras/Git/ivan-garcia-parras/homebridge-eufy-legacy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { DEFAULT_CAMERACONFIG_VALUES, DEFAULT_CONFIG_VALUES } from '../../util/default-config-values';\nimport { ChargingStatus } from '../../util/eufy-security-client.utils';\nimport { ConfigOptionsInterpreter } from '../config-options-interpreter';\nimport { faQuestionCircle } from '@fortawesome/free-regular-svg-icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../plugin.service\";\nimport * as i2 from \"../../accessory.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i7 from \"@fortawesome/angular-fontawesome\";\n\nfunction EnableHsvComponent_div_6_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" You can enable this setting nevertheless in \");\n    i0.ɵɵelementStart(2, \"a\", 9);\n    i0.ɵɵtext(3, \"Plugin Settings\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"p\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EnableHsvComponent_div_6_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sn_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(sn_r6);\n  }\n}\n\nfunction EnableHsvComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1, \" There are other cameras connected through the same station as this device. One station can only ever stream from one camera at the same time. Therefore it is not recommened to use HomeKit Secure Video with this camera since this would likely lead to conflicts.\");\n    i0.ɵɵelement(2, \"p\");\n    i0.ɵɵtemplate(3, EnableHsvComponent_div_6_div_3_Template, 5, 0, \"div\", 6);\n    i0.ɵɵtext(4, \" Cameras on the same station: \");\n    i0.ɵɵelementStart(5, \"ul\");\n    i0.ɵɵtemplate(6, EnableHsvComponent_div_6_li_6_Template, 2, 1, \"li\", 8);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.ignoreMultipleDevicesWarning);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.camerasOnSameStation);\n  }\n}\n\nfunction EnableHsvComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1, \" Since your device is battery powered and currently not charging we don't recommend using this setting. The battery life will most likely decrease significantly. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EnableHsvComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \" Please be advised that since your device is only solar powered we cannot guarantee optimal results with this setting. It might well be, that your battery is depleting faster than it can be recharged by the sun. This depends heavily on your exact use case. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EnableHsvComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function EnableHsvComponent_div_20_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.showAdvancedSettings = !ctx_r8.showAdvancedSettings;\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 12, 13);\n    i0.ɵɵlistener(\"ngbCollapseChange\", function EnableHsvComponent_div_20_Template_div_ngbCollapseChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return !(ctx_r10.showAdvancedSettings = $event);\n    });\n    i0.ɵɵelementStart(5, \"div\", 14);\n    i0.ɵɵtext(6, \"HomeKit Secure Video is processed on Apples dedicated Servers (object and face recognition). This service is somewhat picky about the encoded video data it accepts. If you encounter problems with HKSV but normal streaming is doing fine, you can try to alter these settings. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 15)(8, \"div\", 16);\n    i0.ɵɵtext(9, \" Video Settings \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ul\", 17)(11, \"li\", 18)(12, \"label\", 19)(13, \"span\");\n    i0.ɵɵtext(14, \"Maximum Recording Duration \");\n    i0.ɵɵelement(15, \"fa-icon\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"input\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.recordingDuration = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_16_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.update();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"li\", 18)(18, \"label\", 22)(19, \"div\", 23)(20, \"input\", 24);\n    i0.ɵɵlistener(\"change\", function EnableHsvComponent_div_20_Template_input_change_20_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r13 = i0.ɵɵnextContext();\n      ctx_r13.vcodec = ctx_r13.vcodec === undefined ? \"\" : undefined;\n      return ctx_r13.update();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"label\", 25);\n    i0.ɵɵtext(22, \" vcodec \");\n    i0.ɵɵelement(23, \"fa-icon\", 26);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"input\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.vcodec = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_24_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.update();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"li\", 18)(26, \"label\", 28)(27, \"div\", 23)(28, \"input\", 29);\n    i0.ɵɵlistener(\"change\", function EnableHsvComponent_div_20_Template_input_change_28_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r16 = i0.ɵɵnextContext();\n      ctx_r16.videoFilter = ctx_r16.videoFilter === undefined ? \"\" : undefined;\n      return ctx_r16.update();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"label\", 30);\n    i0.ɵɵtext(30, \" videoFilter \");\n    i0.ɵɵelement(31, \"fa-icon\", 31);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(32, \"input\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_32_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.videoFilter = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_32_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.update();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"li\", 18)(34, \"label\", 33)(35, \"div\", 23)(36, \"input\", 34);\n    i0.ɵɵlistener(\"change\", function EnableHsvComponent_div_20_Template_input_change_36_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r19 = i0.ɵɵnextContext();\n      ctx_r19.encoderOptions = ctx_r19.encoderOptions === undefined ? \"\" : undefined;\n      return ctx_r19.update();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"label\", 35);\n    i0.ɵɵtext(38, \" encoderOptions \");\n    i0.ɵɵelement(39, \"fa-icon\", 36);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(40, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_40_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.encoderOptions = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_40_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.update();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(41, \"li\", 18)(42, \"div\", 23)(43, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_43_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.crop = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_43_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.update();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"label\", 39);\n    i0.ɵɵtext(45, \" force crop image to requested/defined resolution \");\n    i0.ɵɵelement(46, \"fa-icon\", 40);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(47, \"li\", 18)(48, \"label\", 41)(49, \"div\", 23)(50, \"input\", 42);\n    i0.ɵɵlistener(\"change\", function EnableHsvComponent_div_20_Template_input_change_50_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r24 = i0.ɵɵnextContext();\n      ctx_r24.maxFPS = ctx_r24.maxFPS === undefined ? 0 : undefined;\n      return ctx_r24.update();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"label\", 43);\n    i0.ɵɵtext(52, \" fps \");\n    i0.ɵɵelement(53, \"fa-icon\", 44);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(54, \"input\", 45);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_54_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.maxFPS = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_54_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.update();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(55, \"li\", 18)(56, \"label\", 46)(57, \"div\", 23)(58, \"input\", 47);\n    i0.ɵɵlistener(\"change\", function EnableHsvComponent_div_20_Template_input_change_58_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r27 = i0.ɵɵnextContext();\n      ctx_r27.maxBitrate = ctx_r27.maxBitrate === undefined ? 0 : undefined;\n      return ctx_r27.update();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"label\", 48);\n    i0.ɵɵtext(60, \" bitrate \");\n    i0.ɵɵelement(61, \"fa-icon\", 49);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(62, \"input\", 50);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_62_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.maxBitrate = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_62_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return ctx_r29.update();\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(63, \"div\", 15)(64, \"div\", 16);\n    i0.ɵɵtext(65, \" Audio Settings \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(66, \"ul\", 17)(67, \"li\", 18)(68, \"div\", 23)(69, \"input\", 51);\n    i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_div_20_Template_input_ngModelChange_69_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.audio = $event;\n    })(\"change\", function EnableHsvComponent_div_20_Template_input_change_69_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return ctx_r31.update();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(70, \"label\", 52);\n    i0.ɵɵtext(71, \" Enable Audio \");\n    i0.ɵɵelement(72, \"fa-icon\", 53);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.showAdvancedSettings ? \"Hide\" : \"Show\", \" advanced HKSV settings\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngbCollapse\", !ctx_r3.showAdvancedSettings);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.recordingDuration);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"checked\", ctx_r3.vcodec !== undefined ? true : null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.vcodec);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.vcodec === undefined ? true : null);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"checked\", ctx_r3.videoFilter !== undefined ? true : null);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"style\", ctx_r3.vcodec === \"copy\" ? \"text-decoration: line-through; color: lightgray;\" : null, i0.ɵɵsanitizeStyle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.videoFilter);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.videoFilter === undefined || ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"checked\", ctx_r3.encoderOptions !== undefined ? true : null);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"style\", ctx_r3.vcodec === \"copy\" ? \"text-decoration: line-through; color: lightgray;\" : null, i0.ɵɵsanitizeStyle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.encoderOptions);\n    i0.ɵɵattribute(\"placeholder\", ctx_r3.encoderOptions !== undefined ? \"\" : ctx_r3.vcodecOptionsPlaceholder)(\"disabled\", ctx_r3.encoderOptions === undefined || ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.crop);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"style\", ctx_r3.vcodec === \"copy\" ? \"text-decoration: line-through; color: lightgray;\" : null, i0.ɵɵsanitizeStyle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"checked\", ctx_r3.maxFPS !== undefined ? true : null);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"style\", ctx_r3.vcodec === \"copy\" ? \"text-decoration: line-through; color: lightgray;\" : null, i0.ɵɵsanitizeStyle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.maxFPS);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.maxFPS === undefined || ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"checked\", ctx_r3.maxBitrate !== undefined ? true : null);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"style\", ctx_r3.vcodec === \"copy\" ? \"text-decoration: line-through; color: lightgray;\" : null, i0.ɵɵsanitizeStyle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.maxBitrate);\n    i0.ɵɵattribute(\"disabled\", ctx_r3.maxBitrate === undefined || ctx_r3.vcodec === \"copy\" ? true : null);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.audio);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"icon\", ctx_r3.faQuestionCircle);\n  }\n}\n\nexport let EnableHsvComponent = /*#__PURE__*/(() => {\n  class EnableHsvComponent extends ConfigOptionsInterpreter {\n    constructor(pluginService, accessoryService) {\n      super(pluginService);\n      this.accessoryService = accessoryService;\n      this.faQuestionCircle = faQuestionCircle;\n      this.value = DEFAULT_CAMERACONFIG_VALUES.hsv;\n      this.showAdvancedSettings = false; // debug: boolean | undefined = undefined;\n      // readRate: boolean | undefined = undefined;\n\n      this.vcodec = undefined; // acodec: string | undefined = undefined;\n\n      this.videoFilter = undefined;\n      this.encoderOptions = undefined; // probeSize: number | undefined = undefined;\n      // analyzeDuration: number | undefined = undefined;\n      // maxStreams: number | undefined = undefined;\n      // maxWidth: number | undefined = undefined;\n      // maxHeight: number | undefined = undefined;\n\n      this.maxFPS = undefined;\n      this.maxBitrate = undefined; // useSeparateProcesses: boolean | undefined = undefined;\n\n      this.crop = true;\n      this.audio = true; // audioSampleRate: number | undefined = undefined;\n      // audioBitrate: number | undefined = undefined;\n      // acodecHK: string | undefined = undefined;\n      // acodecOptions: string | undefined = undefined;\n      // videoProcessor: string | undefined = undefined;\n\n      this.recordingDuration = DEFAULT_CAMERACONFIG_VALUES.hsvRecordingDuration; // acodecPlaceholder = 'libfdk_aac';\n      // acodecOptionsPlaceholder = '-profile:a aac_eld';\n\n      this.vcodecOptionsPlaceholder = '-preset ultrafast -tune zerolatency';\n      this.chargingStatus = ChargingStatus.PLUGGED;\n      this.camerasOnSameStation = [];\n      this.ignoreMultipleDevicesWarning = DEFAULT_CONFIG_VALUES.ignoreMultipleDevicesWarning;\n    }\n\n    ngOnInit() {\n      this.readValue();\n    }\n\n    readValue() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        var _a;\n\n        const config = yield _this.getCameraConfig(((_a = _this.accessory) === null || _a === void 0 ? void 0 : _a.uniqueId) || '');\n\n        if (config && Object.prototype.hasOwnProperty.call(config, 'hsv')) {\n          _this.value = config['hsv'];\n        }\n\n        if (config && Object.prototype.hasOwnProperty.call(config, 'hsvRecordingDuration')) {\n          _this.recordingDuration = config['hsvRecordingDuration'];\n        }\n\n        if (config && Object.prototype.hasOwnProperty.call(config, 'hsvConfig')) {\n          Object.entries(config['hsvConfig']).forEach(([key, value]) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const obj = _this;\n            obj[key] = value;\n          });\n        }\n\n        if (_this.accessory) {\n          _this.accessoryService.getChargingStatus(_this.accessory.uniqueId).then(chargingStatus => _this.chargingStatus = chargingStatus);\n\n          if (Object.prototype.hasOwnProperty.call(_this.config, 'ignoreMultipleDevicesWarning')) {\n            _this.ignoreMultipleDevicesWarning = _this.config['ignoreMultipleDevicesWarning'];\n          }\n\n          const ignoredDevices = config && Object.prototype.hasOwnProperty.call(config, 'ignoreDevices') ? config['ignoreDevices'] : [];\n\n          _this.accessoryService.getCamerasOnSameStation(_this.accessory.uniqueId, ignoredDevices).then(devices => {\n            _this.camerasOnSameStation = devices;\n\n            if (_this.camerasOnSameStation.length > 1 && !_this.ignoreMultipleDevicesWarning) {\n              _this.value = false;\n\n              _this.update();\n            }\n          });\n        }\n\n        _this.placeholderUpdate();\n      })();\n    }\n\n    placeholderUpdate() {\n      // switch (this.acodecHK) {\n      //   case 'ACC-eld':\n      //     this.acodecPlaceholder = 'libfdk_aac';\n      //     this.acodecOptionsPlaceholder = '-profile:a aac_eld';\n      //     break;\n      //   case 'OPUS':\n      //     this.acodecPlaceholder = 'libopus';\n      //     this.acodecOptionsPlaceholder = '-application lowdelay';\n      //     break;\n      //   default:\n      //     this.acodecPlaceholder = 'libfdk_aac';\n      //     this.acodecOptionsPlaceholder = '-profile:a aac_eld';\n      //     break;\n      // }\n      switch (this.vcodec) {\n        case 'copy':\n          this.vcodecOptionsPlaceholder = '';\n          break;\n\n        case '':\n        case 'libx264':\n        case undefined:\n          this.vcodecOptionsPlaceholder = '-preset ultrafast -tune zerolatency';\n          break;\n\n        default:\n          this.vcodecOptionsPlaceholder = 'leave blank if you don\\'t know';\n          break;\n      }\n    }\n\n    update() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        var _a;\n\n        const config = yield _this2.getCameraConfig(((_a = _this2.accessory) === null || _a === void 0 ? void 0 : _a.uniqueId) || '');\n        const videoConfig = config && Object.prototype.hasOwnProperty.call(config, 'videoConfig') ? config['videoConfig'] : {};\n        const newConfig = {};\n\n        if (!_this2.audio) {\n          newConfig['audio'] = _this2.audio;\n        }\n\n        if (!_this2.crop) {\n          newConfig['crop'] = _this2.crop;\n        }\n\n        if (_this2.vcodec && _this2.vcodec !== '') {\n          newConfig['vcodec'] = _this2.vcodec;\n        }\n\n        if (_this2.videoFilter && _this2.videoFilter !== '') {\n          newConfig['videoFilter'] = _this2.videoFilter;\n        }\n\n        if (_this2.encoderOptions !== undefined) {\n          newConfig['encoderOptions'] = _this2.encoderOptions;\n        }\n\n        if (_this2.maxFPS !== undefined) {\n          newConfig['maxFPS'] = _this2.maxFPS;\n        }\n\n        if (_this2.maxBitrate !== undefined) {\n          newConfig['maxBitrate'] = _this2.maxBitrate;\n        }\n\n        _this2.updateConfig({\n          hsv: _this2.value,\n          hsvRecordingDuration: _this2.recordingDuration,\n          hsvConfig: newConfig\n        }, _this2.accessory);\n\n        _this2.placeholderUpdate();\n      })();\n    }\n\n  }\n\n  EnableHsvComponent.ɵfac = function EnableHsvComponent_Factory(t) {\n    return new (t || EnableHsvComponent)(i0.ɵɵdirectiveInject(i1.PluginService), i0.ɵɵdirectiveInject(i2.AccessoryService));\n  };\n\n  EnableHsvComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EnableHsvComponent,\n    selectors: [[\"app-enable-hsv\"]],\n    inputs: {\n      accessory: \"accessory\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 21,\n    vars: 6,\n    consts: [[1, \"settingsItem\", \"row\", \"p-3\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-2\"], [1, \"form-check\", \"form-switch\"], [\"type\", \"checkbox\", \"role\", \"switch\", \"id\", \"flexSwitchCheckDefault\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"class\", \"alert alert-warning\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\"], [4, \"ngFor\", \"ngForOf\"], [\"routerLink\", \"/advancedConfig\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"mb-3\", 3, \"click\"], [3, \"ngbCollapse\", \"ngbCollapseChange\"], [\"collapse\", \"ngbCollapse\"], [1, \"mb-3\"], [1, \"card\", \"mb-3\"], [1, \"card-header\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [\"for\", \"recordingDurationInput\", 1, \"form-label\"], [\"ngbTooltip\", \"Duration a HKSV event will be recorded. The recording may be ended sooner by HomeKit, but mostly the whole time will be recorded and analyzed regarding motion, people and so on. Don't use too high values for battery powered devices.\", 1, \"m-1\", 3, \"icon\"], [\"type\", \"number\", \"id\", \"recordingDurationInput\", \"placeholder\", \"90\", \"min\", \"10\", \"max\", \"300\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"for\", \"vcodecInput\", 1, \"form-label\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"id\", \"vcodec\", 1, \"form-check-input\", 3, \"checked\", \"change\"], [\"for\", \"vcodec\", 1, \"form-check-label\"], [\"ngbTooltip\", \"Choose which video codec should be used to encode the video stream for HomeKit.\", 1, \"m-1\", 3, \"icon\"], [\"type\", \"text\", \"id\", \"vcodecInput\", \"placeholder\", \"libx264\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"for\", \"filterInput\", 1, \"form-label\"], [\"type\", \"checkbox\", \"id\", \"videoFilter\", 1, \"form-check-input\", 3, \"checked\", \"change\"], [\"for\", \"videoFilter\", 1, \"form-check-label\"], [\"ngbTooltip\", \"Set custom filters for video encoding.\", 1, \"m-1\", 3, \"icon\"], [\"type\", \"text\", \"id\", \"filterInput\", \"placeholder\", \"leave blank if you don't know\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"for\", \"encoderOptionsInput\", 1, \"form-label\"], [\"type\", \"checkbox\", \"id\", \"encoderOptions\", 1, \"form-check-input\", 3, \"checked\", \"change\"], [\"for\", \"encoderOptions\", 1, \"form-check-label\"], [\"ngbTooltip\", \"Set custom codec options for video encoding.\", 1, \"m-1\", 3, \"icon\"], [\"type\", \"text\", \"id\", \"encoderOptionsInput\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"checkbox\", \"id\", \"crop\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"for\", \"crop\", 1, \"form-check-label\"], [\"ngbTooltip\", \"The input might be in another aspect ratio than requested by HomeKit (e.g. Doorbells may stream 1600x1200 -> 4:3 while HomeKit requests 1920x1080 -> 16:9). This setting will ensure that the requested aspect ratio is hit by cropping the image accordingly.\", 1, \"m-1\", 3, \"icon\"], [\"for\", \"maxFPSInput\", 1, \"form-label\"], [\"type\", \"checkbox\", \"id\", \"maxFPS\", 1, \"form-check-input\", 3, \"checked\", \"change\"], [\"for\", \"maxFPS\", 1, \"form-check-label\"], [\"ngbTooltip\", \"Frames per second for the encoded video. If not set the value requested by the HomeKit Controller will be used.\", 1, \"m-1\", 3, \"icon\"], [\"type\", \"number\", \"id\", \"maxFPSInput\", \"placeholder\", \"0\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"for\", \"maxBitrateInput\", 1, \"form-label\"], [\"type\", \"checkbox\", \"id\", \"maxBitrate\", 1, \"form-check-input\", 3, \"checked\", \"change\"], [\"for\", \"maxBitrate\", 1, \"form-check-label\"], [\"ngbTooltip\", \"Bitrate used for the encoded video. If not set the value requested by the HomeKit Controller will be used.\", 1, \"m-1\", 3, \"icon\"], [\"type\", \"number\", \"id\", \"maxBitrateInput\", \"placeholder\", \"0\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"checkbox\", \"id\", \"hsvAudio\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"for\", \"hsvAudio\", 1, \"form-check-label\"], [\"ngbTooltip\", \"Enable audio in HKSV recordings.\", 1, \"m-1\", 3, \"icon\"]],\n    template: function EnableHsvComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"span\");\n        i0.ɵɵtext(3, \"Use HomeKit Secure Video\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function EnableHsvComponent_Template_input_ngModelChange_5_listener($event) {\n          return ctx.value = $event;\n        })(\"change\", function EnableHsvComponent_Template_input_change_5_listener() {\n          return ctx.update();\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(6, EnableHsvComponent_div_6_Template, 7, 2, \"div\", 4);\n        i0.ɵɵtemplate(7, EnableHsvComponent_div_7_Template, 2, 0, \"div\", 4);\n        i0.ɵɵtemplate(8, EnableHsvComponent_div_8_Template, 2, 0, \"div\", 5);\n        i0.ɵɵelementStart(9, \"small\")(10, \"i\");\n        i0.ɵɵtext(11, \" This feature is in an experimental state and can have some side-effects due to technical limitations imposed by the connection to the eufy device. \");\n        i0.ɵɵelement(12, \"p\");\n        i0.ɵɵelementStart(13, \"ul\")(14, \"li\");\n        i0.ɵɵtext(15, \"The device will record until the HomeKit-Controller cancels the recording, or up to a maximum of three minutes. However Apple analyzes the recorded video and only shows the snippets containing an actual event.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"li\");\n        i0.ɵɵtext(17, \"Due to the continued recording the power consumption will be higher than with the native recording through the eufy app. Keep this in mind, if you use battery powered devices.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"li\");\n        i0.ɵɵtext(19, \"If you use low performance hardware the recording might interfere with livestreaming. You might be able to utilize the 'copy' preset in advanced configuration to mitigate this.\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(20, EnableHsvComponent_div_20_Template, 73, 39, \"div\", 6);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.value);\n        i0.ɵɵattribute(\"disabled\", ctx.camerasOnSameStation.length > 1 && !ctx.ignoreMultipleDevicesWarning ? true : null);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.camerasOnSameStation.length > 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.chargingStatus === 2 && ctx.value);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.chargingStatus === 4 && ctx.value);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", ctx.value);\n      }\n    },\n    directives: [i3.CheckboxControlValueAccessor, i3.NgControlStatus, i3.NgModel, i4.NgIf, i5.RouterLinkWithHref, i4.NgForOf, i6.NgbCollapse, i7.FaIconComponent, i6.NgbTooltip, i3.MinValidator, i3.MaxValidator, i3.NumberValueAccessor, i3.DefaultValueAccessor],\n    encapsulation: 2\n  });\n  return EnableHsvComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}